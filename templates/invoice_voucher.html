{% extends "base.html" %}

{% block title %}Payment Voucher - {{ invoice.supplier_name }}{% endblock %}

{% block content %}
<style>
    @media print {
        @page {
            size: A4;
            margin: 10mm;
        }

        /* Avoid accidental extra blank pages from min-heights/flex layouts. */
        .voucher-sheet,
        .voucher-body {
            min-height: 0 !important;
            height: auto !important;
        }
    }
</style>
<div class="voucher-sheet max-w-5xl mx-auto bg-white shadow print:shadow-none print:border print:border-gray-300 p-8 print:p-6 text-gray-900">
    <div class="voucher-body flex flex-col gap-10">
        <div>
            <div class="flex justify-between items-start mb-8">
                <div class="border border-gray-900 px-6 py-4 text-center uppercase tracking-wide min-w-[240px] max-w-[55%]">
                    <div class="font-semibold text-lg break-words">{{ invoice.supplier_name }}</div>
                </div>
                <div class="text-right">
                    <p class="text-sm uppercase tracking-wide font-semibold">Payment Voucher</p>
                    <p class="text-sm mt-2">Date: <span class="font-medium">{{ invoice.invoice_date|format_date('%d %B %Y') }}</span></p>
                </div>
            </div>

            <div class="w-full">
                <table class="w-full border border-gray-900 text-sm table-fixed">
                    <colgroup>
                        <col style="width: 12%;">
                        <col style="width: 10%;">
                        <col style="width: 14%;">
                        <col style="width: 30%;">
                        <col style="width: 17%;">
                        <col style="width: 17%;">
                    </colgroup>
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="border border-gray-900 px-2 py-2 text-left">PJV No</th>
                            <th class="border border-gray-900 px-2 py-2 text-left">TF No</th>
                            <th class="border border-gray-900 px-2 py-2 text-left">Invoice</th>
                            <th class="border border-gray-900 px-2 py-2 text-left">Description</th>
                            <th class="border border-gray-900 px-2 py-2 text-right">Amount per Invoice</th>
                            <th class="border border-gray-900 px-2 py-2 text-right">Amount Paid</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border border-gray-900 px-2 py-2 align-top break-words">{{ invoice.pjv_number }}</td>
                            <td class="border border-gray-900 px-2 py-2 align-top break-words">{{ invoice.tf_number or invoice.chq_number or '-' }}</td>
                            <td class="border border-gray-900 px-2 py-2 align-top break-words">{{ invoice.invoice_number }}</td>
                            <td class="border border-gray-900 px-2 py-2 align-top whitespace-pre-line break-words">{{ invoice.description }}</td>
                            <td class="border border-gray-900 px-2 py-2 align-top text-right">&euro;{{ "{:,.2f}".format(invoice.invoice_amount|float) }}</td>
                            <td class="border border-gray-900 px-2 py-2 align-top text-right">&euro;{{ "{:,.2f}".format(invoice.payment_amount|float) }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="mt-8 text-sm">
                <p class="font-semibold">Kindly remit fiscal receipt and statement at the end of the month</p>
            </div>
        </div>

        <div>
            <div>
                <div class="border-t border-gray-700 w-56"></div>
                <p class="text-sm mt-2 font-medium">Executive Secretary</p>
            </div>

            <div class="mt-8 flex gap-3 print:hidden">
                <button onclick="window.print()" class="px-4 py-2 bg-malta-blue text-white rounded-lg hover:bg-malta-blue-dark">Print</button>
                <a href="/invoices" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">Back</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
